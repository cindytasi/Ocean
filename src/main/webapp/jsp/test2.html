<!DOCTYPE html>
<html lang="en">

<head>
    <!-- 省略原有的代码 -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <style>
        /* 其他 CSS 样式 */
        body {
            background-color: #363434;
            color: #fff;
            /* Optional: Set the text color to white for contrast */
        }

        /* Other CSS styles go here */

        h3 {
            margin-top: 100px;
            /* Adjust the value to move the h3 element down */
            margin-left: 50px;
            height: 40px;

        }


        .btn-group-vertical .btn {
            background-color: #363333;
            /* 將按鈕的底色設置為淺灰色 (#777) */
            color: #fff;
            /* 設置按鈕文字顏色為白色 */
        }


        /* .name-container .right-aligned {
            text-align: right;
            /* 讓內容向右對齊 */
        /* } */


        /* .item-container {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
            /* 调整商品与信息之间的间距 */
            /* border: 3px solid #fff; */
            /* 白色細線邊框 */
            /* padding: 10px; */
            /* 內部間距，使白色邊框不會貼得太緊 */
        /* } */ 

        .preview_img {
            max-width: 100px;
            /* 调整图片的最大宽度 */
            margin-right: 20px;
            /* 调整图片与信息之间的间距 */
        }

        /* .item-info {
            flex: 1;
            /* 让信息占据剩余的空间 */
        /* }  */
    </style>
</head>

<body>
<!-- navbar -->
<nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top mb-5">
    <div class="container-fluid">
        <div class="collapse navbar-collapse justify-content-between" id="navbarNavDropdown">
            <!-- logo -->
            <div class="logo d-flex">
                <a class="navbar-brand" href="/oceanIndex.html">
                    <img src="https://cdn.discordapp.com/attachments/1111587335419740274/1129318479376429158/logo_-_.png" alt="Ocean Logo" style="width: 50px;height: 50px;">
                </a>
                <!-- search -->
                <div class="input-group my-auto w-50">
                    <input type="text" class="form-control" id="searchInput" placeholder="Search"
                        aria-label="Search" aria-describedby="basic-addon2">
                    <button class="btn btn-outline-secondary" type="button" id="searchButton">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </div>
            <!-- 導覽列 -->
            <div class="list">
                <ul class="navbar-nav align-items-center">
                    <!-- 首頁 -->
                    <li class="nav-item">
                        <a class="nav-link active" href="/oceanIndex.html">首頁</a>
                    </li>
                    <!-- 電影 -->
                    <li class="nav-item">
                        <a class="nav-link" href="/movieIndex.html">電影</a>
                    </li>
                    <!-- 影集 -->
                    <li class="nav-item">
                        <a class="nav-link" href="/seriesIndex.html">影集</a>
                    </li>
                    <!-- 藝人商品 -->
                    <li class="nav-item">
                        <a class="nav-link" href="/productIndex.html">藝人商品</a>
                    </li>
                    <!-- 收藏地圖 -->
                    <li class="nav-item">
                        <a class="nav-link" href="/favoriteMapIndex.html">收藏地圖</a>
                    </li>
                    <!--user  -->
                    <div class="nav-item dropdown">
                        <button type="button" class="btn dropdown-toggle" id="navbarDropdownUserLink"
                            data-bs-toggle="dropdown" aria-expanded="false">
                            <img src="/img/user.webp" alt="" style="width: 40px; height: 40px;">
                        </button>
                        <!-- user下拉選單 -->
                        <ul class="dropdown-menu dropdown-menu-end mt-2" style="opacity: 80%;"
                            aria-labelledby="navbarDropdownUserLink">
                            <li><a class="dropdown-item" href="/aacountIndex.html">帳戶</a></li>
                            <li><a class="dropdown-item" href="/accountDetail.html">基本資料</a></li>
                            <li><a class="dropdown-item" href="/myAchieve.html">我的成就</a></li>
                            <li><a class="dropdown-item" href="/myOrder.html">我的訂單</a></li>
                            <li><a class="dropdown-item" href="/myList.html">我的片單</a></li>
                            <li><a class="dropdown-item" href="/watchHistory.html">觀看紀錄</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="/signOut.html">登出</a></li>
                        </ul>
                    </div>
                </ul>
            </div>
        </div>
    </div>
</nav>

<div class="foamtitle container">
    <h3>廠商後台</h3>
</div>  
<div class="check container" style="margin-left: 20%;">
    <button type="button" class="btn btn-outline-secondary"><a href="test.html">已上架</a></button>
    <button type="button" class="btn btn-outline-secondary">待審核</button>
</div>

    <div class="foamlist container">
        <div class="mainfoam  left d-flex">
            <div class="btn">
                <button type="button" class="btn btn-dark "><a href="test2.html">商品列表</a></button>
                <button type="button" class="btn btn-dark"><a href="test.html">上架商品</a></button>
                <br>
                <button type="button" class="btn btn-dark">商品置入</button>
                <button type="button" class="btn btn-dark">審核明細</button>
            </div>
                <!-- 上面兩個按鈕 -->
                <div id="product" class="foamdetail container">
                    商品一
                    <div class="item-container border border-1">
                        <img src="..." class="preview_img" alt="商品圖片">
                        <div class="item-info">
                            <label for="inputPassword" class="col-sm-2 col-form-label">商品名稱</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="inputPassword">
                            </div>
                            <!-- 其他商品信息 -->


                            <label for="inputPassword" class="col-sm-2 col-form-label">商品分類</label>
                            <div class="col-sm-10">
                                <!-- <input type="商品名稱" class="form-control" id="inputPassword"> -->


                                <select class="form-select" aria-label="Default select example">
                                    <option selected>開啟選擇類別</option>
                                    <option value="1">衣服</option>
                                    <option value="2">庫子</option>
                                    <option value="3">帽子</option>
                                </select>
                            </div>

                            <label for="inputPassword" class="col-sm-2 col-form-label">商品尺寸</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="inputPassword">
                            </div>
                            <label for="inputPassword" class="col-sm-2 col-form-label">商品庫存</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="inputPassword">
                            </div>
                            <div class="right-aligned">
                                <button type="button" class="btn btn-warning">編輯</button>
                                <button type="button" class="btn btn-info">下架</button>
                            </div>
                        </div>
                    </div>
                    商品二
                    <div class="item-container border border-1">
                        <img src="..." class="preview_img" alt="商品圖片">
                        <div class="item-info">
                            <label for="productName" class="col-sm-2 col-form-label">商品名稱</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="productName">
                            </div> -->
                            <!-- 其他商品信息 -->

                            <label for="specType" class="col-sm-2 col-form-label">商品分類</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="specType">


                                <select class="form-select" aria-label="Default select example"id="specType">
                                    <option selected>開啟選擇類別</option>
                                    <option value="1">衣服</option>
                                    <option value="2">庫子</option>
                                    <option value="3">帽子</option>
                                </select>
                            </div>

                            <label for="sizeType" class="col-sm-2 col-form-label">商品尺寸</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="sizeType">
                            </div>
                            <label for="price" class="col-sm-2 col-form-label">商品庫存</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="price">
                            </div>
                            <div class="right-aligned">
                                <button type="button" class="btn btn-warning">編輯</button>
                                <button type="button" class="btn btn-info">下架</button>

                            </div>

                        </div>
                    </div>
                    商品三
                    <div class="item-container border border-1">
                        <img src="..." class="preview_img" alt="商品圖片">
                        <div class="item-info">
                            <label for="inputPassword" class="col-sm-2 col-form-label">商品名稱</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="inputPassword">
                            </div>
                            <!-- 其他商品信息 -->

                            <label for="inputPassword" class="col-sm-2 col-form-label">商品分類</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="inputPassword">


                                 <select class="form-select" aria-label="Default select example">
                                    <option selected>開啟選擇類別</option>
                                    <option value="1">衣服</option>
                                    <option value="2">庫子</option>
                                    <option value="3">帽子</option>
                                </select>
                            </div>

                            <label for="inputPassword" class="col-sm-2 col-form-label">商品尺寸</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="inputPassword">
                            </div>
                            <label for="inputPassword" class="col-sm-2 col-form-label">商品庫存</label>
                            <div class="col-sm-10">
                                <input type="商品名稱" class="form-control" id="inputPassword">
                            </div>
                            <div class="right-aligned">
                                <button type="button" class="btn btn-warning">編輯</button>
                                <button type="button" class="btn btn-info">下架</button>

                            </div>

                        </div>
                    </div>
                    <button id="click-btn">點擊</button>
                    <!-- 其他商品 -->
                </div>

            </div>  
              
        </div>
    </div> <!-- 其他 HTML 结构 -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
    <!-- ajax -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.0/jquery.min.js"></script> 

    <!-- JQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" ></script>

    <script>
        window.onload = function(){

                console.log(1234);
         
                const product_name_input = document.getElementById("inputPassword");
                const product_name = product_name_input.value;  
                const product =document.querySelector("#product");
                
                const productName = document.getElementById("productName");
                const specType = document.getElementById("specType");
                const sizeType = document.getElementById("sizeType");
                const price = document.getElementById("price");
                const inStock = document.getElementById("inStock");

                $.ajax({
                    url:"/Ocean/ProductListServlet",
                    type:"POST",
                    dataType:"JSON",
                    success:function(data){

                        console.log(data);

                        // location.href = "https://www.google.com"

                            product.innerHTML=""; 

                        for(let i in data){

                            if(!data[i].successful){

                                var itemContainer = document.createElement("div");
                                itemContainer.className = "item-container border border-1";

                                // 創建圖片元素
                                var img = document.createElement("img");
                                img.src = "..."; // 設置圖片的src屬性
                                img.className = "preview_img";
                                img.alt = "商品圖片";

                                // 創建商品信息容器
                                var itemInfo = document.createElement("div");
                                itemInfo.className = "item-info";

                                // 創建商品名稱元素
                                var nameLabel = document.createElement("label");
                                nameLabel.className = "col-sm-2 col-form-label";
                                nameLabel.textContent = "商品名稱";
                               

                                var nameInput = document.createElement("input");
                                nameInput.type = "text"; // 修改為文本輸入框
                                nameInput.className = "form-control";
                                nameInput.id = "inputPassword";
                                nameInput.value=data[i].productName;

                                // 創建商品分類元素
                                var categoryLabel = document.createElement("label");
                                categoryLabel.className = "col-sm-2 col-form-label";
                                categoryLabel.textContent = "商品分類";                

                                var categorySelect = document.createElement("select");
                                categorySelect.className = "form-select";
                                categorySelect.setAttribute("aria-label", "Default select example");

                                var categoryOption1 = document.createElement("option");
                                categoryOption1.value = "1";
                                categoryOption1.textContent = "衣服";

                                var categoryOption2 = document.createElement("option");
                                categoryOption2.value = "2";
                                categoryOption2.textContent = "褲子";

                                var categoryOption3 = document.createElement("option");
                                categoryOption3.value = "3";
                                categoryOption3.textContent = "帽子";

                                // var categoryOption3 = document.createElement("option");
                                // categoryOption3.value = "4";
                                // categoryOption3.textContent = "帽子";

                                var categoryOption4 = document.createElement("option");
                                categoryOption4.value = "5";
                                categoryOption4.textContent = "其它";

                                // 添加選項到選擇框
                                categorySelect.appendChild(categoryOption1);
                                categorySelect.appendChild(categoryOption2);
                                categorySelect.appendChild(categoryOption3);
                                categorySelect.appendChild(categoryOption4);

                                if (categorySelect.options[0].value === data[i].specType) {
                                    categorySelect.options[0].selected = true;
                                }else if(categorySelect.options[1].value === data[i].specType){
                                    categorySelect.options[1].selected = true;    
                                }else if(categorySelect.options[2].value === data[i].specType){
                                    categorySelect.options[2].selected = true;
                                }else if(categorySelect.options[3].value === data[i].specType){
                                    categorySelect.options[3].selected = true;
                                }    
                                // 創建商品尺寸元素
                                var sizeLabel = document.createElement("label");
                                sizeLabel.className = "col-sm-2 col-form-label";
                                sizeLabel.textContent = "商品尺寸";

                                var sizeInput = document.createElement("input");
                                sizeInput.type = "text"; // 修改為文本輸入框
                                sizeInput.className = "form-control";
                                sizeInput.value=data[i].sizeType;

                                // 創建商品庫存元素
                                var stockLabel = document.createElement("label");
                                stockLabel.className = "col-sm-2 col-form-label";
                                stockLabel.textContent = "商品庫存";
                                

                                var stockInput = document.createElement("input");
                                stockInput.type = "number"; // 修改為數字輸入框
                                stockInput.className = "form-control";
                                stockInput.value =data[i].inStock ;    
                                
                                // 創建編輯和下架按鈕
                                var editButton = document.createElement("button");
                                editButton.type = "button";
                                editButton.className = "btn btn-warning";
                                editButton.textContent = "編輯";

                                var removeButton = document.createElement("button");
                                removeButton.type = "button";
                                removeButton.className = "btn btn-info";
                                removeButton.textContent = "下架";

 // 添加點擊事件監聽器
 removeButton.addEventListener("click", function() {
            // 發送下架請求
            $.ajax({
                url: "/Ocean/UpdateProductStatus",
                type: "POST",
                data: { productId: data[i].productId }, // 傳遞要下架的產品ID
                success: function(response) {
                    if (response.success) {
                        // 更新成功，你可以更新產品狀態或其他操作
                        console.log("產品已下架");
                    } else {
                        console.log("無法下架產品：" + response.message);
                    }
                },
                error: function() {
                    console.log("下架請求失敗");
                }
            });
        });















                                // 將元素添加到容器中
                                itemInfo.appendChild(nameLabel);
                                itemInfo.appendChild(nameInput);
                                itemInfo.appendChild(categoryLabel);
                                itemInfo.appendChild(categorySelect);
                                itemInfo.appendChild(sizeLabel);
                                itemInfo.appendChild(sizeInput);
                                itemInfo.appendChild(stockLabel);
                                itemInfo.appendChild(stockInput);
                                itemInfo.appendChild(editButton);
                                itemInfo.appendChild(removeButton);

                                itemContainer.appendChild(img);
                                itemContainer.appendChild(itemInfo);

                                
                                product.appendChild(itemContainer);
                                    // product.innerHTML += html;
                                }    
                            
                        }
                        
                    },
                    error:function(){

                     }
                 });
                // fetch("/Ocean/ProductListServlet",{
                //     method:"POST",
                //     headers:{
                //         "Content-Type": "application/json",
                //     },
                //     // body: JSON.stringify({
                //     //  //   product_name_el : product_name
                //     // }),
                // })
                //     .then(responce => responce.json())
                //     .then(data => {data

                //         console.log("data");

                //         if(data.successful){
                //            // location.href = "https://www.google.com"
                //            product.innerHTML=""; 

                //             for(let i in data){
                                
                //                 let html = `<div class="item-container border border-1">
                //                     <img src="..." class="preview_img" alt="商品圖片">
                //                     <div class="item-info">
                //                         <label for="inputPassword" class="col-sm-2 col-form-label">商品名稱</label>
                //                         <div class="col-sm-10">
                //                             <input type="商品名稱" class="form-control" id="inputPassword">
                //                         </div>
                //                         <!-- 其他商品信息 -->


                //                         <label for="inputPassword" class="col-sm-2 col-form-label">商品分類</label>
                //                         <div class="col-sm-10">
                //                             <!-- <input type="商品名稱" class="form-control" id="inputPassword"> -->


                //                             <select class="form-select" aria-label="Default select example">
                //                                 <option selected>開啟選擇類別</option>
                //                                 <option value="1">衣服</option>
                //                                 <option value="2">庫子</option>
                //                                 <option value="3">帽子</option>
                //                             </select>
                //                         </div>

                //                         <label for="inputPassword" class="col-sm-2 col-form-label">商品尺寸</label>
                //                         <div class="col-sm-10">
                //                             <input type="商品名稱" class="form-control" id="inputPassword">
                //                         </div>
                //                         <label for="inputPassword" class="col-sm-2 col-form-label">商品庫存</label>
                //                         <div class="col-sm-10">
                //                             <input type="商品名稱" class="form-control" id="inputPassword">
                //                         </div>
                //                         <div class="right-aligned">
                //                             <button type="button" class="btn btn-warning">編輯</button>
                //                             <button type="button" class="btn btn-info">下架</button>
                //                         </div>
                //                     </div>
                //                 </div>`

                //                 product.appendChild(html);
                //                 // product.innerHTML += html;
                //             }

                //         }
                //     })
                //     //  console.log(product_name);
    
               
            
        }    

</script>
</body>
</html>
